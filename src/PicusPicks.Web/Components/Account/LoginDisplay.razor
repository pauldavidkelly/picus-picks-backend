@using Microsoft.AspNetCore.Components.Authorization
@using System.Security.Claims
@using MudBlazor
@inject NavigationManager Navigation

<AuthorizeView>
    <Authorized>
        <MudStack Row="true" Spacing="2">
            <MudText>Hello, @(context.User.FindFirst(ClaimTypes.Name)?.Value ?? context.User.FindFirst(ClaimTypes.Email)?.Value ?? "User")!</MudText>
            <form method="post" action="Account/LogOut">
                <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Text" Color="Color.Inherit">Log out</MudButton>
            </form>
        </MudStack>
    </Authorized>
    <NotAuthorized>
        <MudButton Variant="Variant.Text" Color="Color.Inherit" Href="Account/Login">Log in</MudButton>
    </NotAuthorized>
</AuthorizeView>

<style>
    .user-info {
        display: flex;
        align-items: center;
        gap: 1rem;
    }
    
    .btn-link {
        background: none;
        border: none;
        color: var(--mud-palette-primary);
        text-decoration: underline;
        cursor: pointer;
        padding: 0;
    }
    
    .btn-link:hover {
        color: var(--mud-palette-primary-darken);
    }
</style>
